INFO:     Will watch for changes in these directories: ['/Users/victor/work/where2meet-clientside/where2meet-client/server/server']
INFO:     Uvicorn running on http://127.0.0.1:5001 (Press CTRL+C to quit)
INFO:     Started reloader process [730] using WatchFiles
INFO:     Started server process [735]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:49773 - "GET /health HTTP/1.1" 200 OK
2025-10-17 01:50:38,333 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-17 01:50:38,334 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:38,335 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-17 01:50:38,335 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:38,336 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-17 01:50:38,336 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:38,338 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:38,339 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.name AS users_name, users.created_at AS users_created_at, users.last_login AS users_last_login, users.is_active AS users_is_active 
FROM users 
WHERE users.id = %(id_1)s AND users.is_active = true 
 LIMIT %(param_1)s
2025-10-17 01:50:38,339 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'id_1': 'user_4895e0117c48457f', 'param_1': 1}
2025-10-17 01:50:38,343 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49817 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/core/config.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [735]
INFO:     Started server process [1346]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2025-10-17 01:50:42,754 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-17 01:50:42,754 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:42,755 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-17 01:50:42,755 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:42,756 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-17 01:50:42,756 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:50:42,757 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:42,758 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.name AS users_name, users.created_at AS users_created_at, users.last_login AS users_last_login, users.is_active AS users_is_active 
FROM users 
WHERE users.id = %(id_1)s AND users.is_active = true 
 LIMIT %(param_1)s
2025-10-17 01:50:42,758 INFO sqlalchemy.engine.Engine [generated in 0.00006s] {'id_1': 'user_4895e0117c48457f', 'param_1': 1}
2025-10-17 01:50:42,763 INFO sqlalchemy.engine.Engine INSERT INTO events (id, title, category, deadline, visibility, allow_vote, final_decision, custom_center_lat, custom_center_lng, expires_at, deleted_at, created_by) VALUES (%(id)s, %(title)s, %(category)s, %(deadline)s, %(visibility)s, %(allow_vote)s, %(final_decision)s, %(custom_center_lat)s, %(custom_center_lng)s, %(expires_at)s, %(deleted_at)s, %(created_by)s) RETURNING events.created_at
2025-10-17 01:50:42,763 INFO sqlalchemy.engine.Engine [generated in 0.00006s] {'id': 'evt_9c1144122ffb4d84', 'title': 'test', 'category': 'restaurant', 'deadline': None, 'visibility': 'blur', 'allow_vote': True, 'final_decision': None, 'custom_center_lat': None, 'custom_center_lng': None, 'expires_at': datetime.datetime(2025, 11, 16, 5, 50, 42, 762603), 'deleted_at': None, 'created_by': 'user_4895e0117c48457f'}
2025-10-17 01:50:42,765 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:50:42,768 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:42,768 INFO sqlalchemy.engine.Engine SELECT events.id, events.title, events.category, events.deadline, events.visibility, events.allow_vote, events.final_decision, events.custom_center_lat, events.custom_center_lng, events.created_at, events.expires_at, events.deleted_at, events.created_by 
FROM events 
WHERE events.id = %(pk_1)s
2025-10-17 01:50:42,768 INFO sqlalchemy.engine.Engine [generated in 0.00005s] {'pk_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:42,770 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49827 - "POST /api/v1/events HTTP/1.1" 201 Created
INFO:     127.0.0.1:49827 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
INFO:     127.0.0.1:49832 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:50:43,434 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,435 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,435 INFO sqlalchemy.engine.Engine [generated in 0.00009s] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,439 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49827 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:50:43,441 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,441 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,441 INFO sqlalchemy.engine.Engine [cached since 0.00612s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
INFO:     127.0.0.1:49827 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:50:43,443 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49832 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:50:43,445 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,445 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,445 INFO sqlalchemy.engine.Engine [cached since 0.00931s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,446 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:50:43,447 INFO sqlalchemy.engine.Engine [generated in 0.00007s] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:43,450 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49827 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:50:43,452 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,452 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,452 INFO sqlalchemy.engine.Engine [cached since 0.0166s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,453 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:50:43,453 INFO sqlalchemy.engine.Engine [cached since 0.006865s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
INFO:     127.0.0.1:49827 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
2025-10-17 01:50:43,454 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49832 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:50:43,456 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,456 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,456 INFO sqlalchemy.engine.Engine [cached since 0.02061s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,459 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:50:43,459 INFO sqlalchemy.engine.Engine [generated in 0.00006s] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:43,462 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49827 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
2025-10-17 01:50:43,465 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,465 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,465 INFO sqlalchemy.engine.Engine [cached since 0.02947s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,466 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:50:43,466 INFO sqlalchemy.engine.Engine [cached since 0.007723s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:43,467 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-17 01:50:43,484 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,484 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,484 INFO sqlalchemy.engine.Engine [cached since 0.04842s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
INFO:     127.0.0.1:49827 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
2025-10-17 01:50:43,488 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49832 - "GET /api/v1/events/evt_9c1144122ffb4d84/stream HTTP/1.1" 200 OK
2025-10-17 01:50:43,496 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:43,496 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:43,496 INFO sqlalchemy.engine.Engine [cached since 0.06038s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:43,498 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49827 - "GET /api/v1/events/evt_9c1144122ffb4d84/stream HTTP/1.1" 200 OK
2025-10-17 01:50:49,927 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:49,929 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:49,929 INFO sqlalchemy.engine.Engine [cached since 6.494s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:49,933 INFO sqlalchemy.engine.Engine INSERT INTO participants (id, event_id, lat, lng, fuzzy_lat, fuzzy_lng, name) VALUES (%(id)s, %(event_id)s, %(lat)s, %(lng)s, %(fuzzy_lat)s, %(fuzzy_lng)s, %(name)s) RETURNING participants.joined_at
2025-10-17 01:50:49,933 INFO sqlalchemy.engine.Engine [generated in 0.00016s] {'id': 'p_a866058f4b87', 'event_id': 'evt_9c1144122ffb4d84', 'lat': 40.7482832, 'lng': -73.93859619999999, 'fuzzy_lat': 40.75268113055475, 'fuzzy_lng': -73.94409159966686, 'name': 'You'}
2025-10-17 01:50:49,936 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:50:49,940 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:49,941 INFO sqlalchemy.engine.Engine SELECT participants.id, participants.event_id, participants.lat, participants.lng, participants.fuzzy_lat, participants.fuzzy_lng, participants.name, participants.joined_at 
FROM participants 
WHERE participants.id = %(pk_1)s
2025-10-17 01:50:49,941 INFO sqlalchemy.engine.Engine [generated in 0.00010s] {'pk_1': 'p_a866058f4b87'}
2025-10-17 01:50:49,943 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(pk_1)s
2025-10-17 01:50:49,943 INFO sqlalchemy.engine.Engine [generated in 0.00007s] {'pk_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:49,944 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49839 - "POST /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 201 Created
2025-10-17 01:50:49,952 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:49,953 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:49,953 INFO sqlalchemy.engine.Engine [cached since 6.517s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:49,954 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49839 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:50:49,959 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:49,959 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:49,959 INFO sqlalchemy.engine.Engine [cached since 6.524s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:49,960 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:50:49,960 INFO sqlalchemy.engine.Engine [cached since 6.514s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:49,961 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49839 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:50:49,965 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:50:49,965 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:50:49,966 INFO sqlalchemy.engine.Engine [cached since 6.53s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:50:49,967 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:50:49,967 INFO sqlalchemy.engine.Engine [cached since 6.508s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:50:49,970 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49839 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/core/config.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [1346]
INFO:     Started server process [2099]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:49900 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/candidates/search HTTP/1.1" 200 OK
2025-10-17 01:52:10,716 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-17 01:52:10,716 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:52:10,718 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-17 01:52:10,718 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:52:10,719 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-17 01:52:10,719 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-17 01:52:10,720 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:10,721 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:10,721 INFO sqlalchemy.engine.Engine [generated in 0.00007s] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:10,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:10,735 INFO sqlalchemy.engine.Engine SELECT users.id AS users_id, users.email AS users_email, users.hashed_password AS users_hashed_password, users.name AS users_name, users.created_at AS users_created_at, users.last_login AS users_last_login, users.is_active AS users_is_active 
FROM users 
WHERE users.id = %(id_1)s AND users.is_active = true 
 LIMIT %(param_1)s
2025-10-17 01:52:10,735 INFO sqlalchemy.engine.Engine [generated in 0.00007s] {'id_1': 'user_4895e0117c48457f', 'param_1': 1}
2025-10-17 01:52:10,739 INFO sqlalchemy.engine.Engine ROLLBACK
2025-10-17 01:52:10,739 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49922 - "GET /api/v1/auth/me HTTP/1.1" 200 OK
INFO:     127.0.0.1:49919 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:52:10,744 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:10,744 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:10,744 INFO sqlalchemy.engine.Engine [cached since 0.02297s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:10,746 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:52:10,746 INFO sqlalchemy.engine.Engine [generated in 0.00006s] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:52:10,748 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49919 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:52:10,751 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:10,751 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:10,751 INFO sqlalchemy.engine.Engine [cached since 0.03025s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:10,753 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:52:10,753 INFO sqlalchemy.engine.Engine [generated in 0.00005s] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:52:10,755 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49919 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
2025-10-17 01:52:10,770 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:10,771 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:10,771 INFO sqlalchemy.engine.Engine [cached since 0.04992s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:10,773 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49919 - "GET /api/v1/events/evt_9c1144122ffb4d84/stream HTTP/1.1" 200 OK
2025-10-17 01:52:12,479 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:12,479 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:12,479 INFO sqlalchemy.engine.Engine [cached since 1.759s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:12,481 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:52:12,481 INFO sqlalchemy.engine.Engine [cached since 1.735s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
📍 Using computed MEC center: (40.748283, -73.938596) with radius: 0.50km
2025-10-17 01:52:12,746 INFO sqlalchemy.engine.Engine DELETE FROM candidates WHERE candidates.event_id = %(event_id_1)s AND candidates.added_by = %(added_by_1)s
2025-10-17 01:52:12,746 INFO sqlalchemy.engine.Engine [generated in 0.00037s] {'event_id_1': 'evt_9c1144122ffb4d84', 'added_by_1': 'system'}
2025-10-17 01:52:12,748 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:52:13,420 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:13,421 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,421 INFO sqlalchemy.engine.Engine [generated in 0.00026s] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJN6wFwihZwokRMtxwzGii9PI', 'param_1': 1}
2025-10-17 01:52:13,426 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,427 INFO sqlalchemy.engine.Engine [cached since 0.00591s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJ64EKfyxfwokRj5CkS1LGFV8', 'param_1': 1}
2025-10-17 01:52:13,429 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,429 INFO sqlalchemy.engine.Engine [cached since 0.008082s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJNZMckVVZwokRG4KdwN8rSeY', 'param_1': 1}
2025-10-17 01:52:13,434 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,434 INFO sqlalchemy.engine.Engine [cached since 0.01363s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJA9zY7SxfwokR2Sh2eXYcRd8', 'param_1': 1}
2025-10-17 01:52:13,437 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,437 INFO sqlalchemy.engine.Engine [cached since 0.01598s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJzdIV2eNZwokRxSJvbX8IIZ0', 'param_1': 1}
2025-10-17 01:52:13,439 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,440 INFO sqlalchemy.engine.Engine [cached since 0.01881s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJbT3uAHBZwokRFfBZhZmdQhk', 'param_1': 1}
2025-10-17 01:52:13,443 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,443 INFO sqlalchemy.engine.Engine [cached since 0.02209s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJAemDtCxfwokRrfHv58ZtcxA', 'param_1': 1}
2025-10-17 01:52:13,445 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,445 INFO sqlalchemy.engine.Engine [cached since 0.02455s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJfSp0FS1fwokR8PYGmnV6vYs', 'param_1': 1}
2025-10-17 01:52:13,448 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,448 INFO sqlalchemy.engine.Engine [cached since 0.0275s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJ4UMDmvtZwokR0twKqXNmzl4', 'param_1': 1}
2025-10-17 01:52:13,451 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,452 INFO sqlalchemy.engine.Engine [cached since 0.03078s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJ5dQtsxBZwokRbBdZUxaHzFE', 'param_1': 1}
2025-10-17 01:52:13,454 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,454 INFO sqlalchemy.engine.Engine [cached since 0.03309s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJb4GKl9VYwokRpSvqo0dCnls', 'param_1': 1}
2025-10-17 01:52:13,457 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,457 INFO sqlalchemy.engine.Engine [cached since 0.03592s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJzzk5JypZwokRQ0tuDC9Cwr8', 'param_1': 1}
2025-10-17 01:52:13,459 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,460 INFO sqlalchemy.engine.Engine [cached since 0.03884s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJ8UEYhUBZwokRoeoL3-iwtaE', 'param_1': 1}
2025-10-17 01:52:13,462 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,462 INFO sqlalchemy.engine.Engine [cached since 0.041s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJicgjodRYwokRRe9iEqIfTvA', 'param_1': 1}
2025-10-17 01:52:13,465 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,465 INFO sqlalchemy.engine.Engine [cached since 0.04396s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJsaCQ-vNZwokRZXMSyrbzfio', 'param_1': 1}
2025-10-17 01:52:13,468 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,468 INFO sqlalchemy.engine.Engine [cached since 0.04701s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJlXecQSpZwokRrNscE92hBzQ', 'param_1': 1}
2025-10-17 01:52:13,470 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,470 INFO sqlalchemy.engine.Engine [cached since 0.04914s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJp9WpPSxZwokR9e5KFVB9lWQ', 'param_1': 1}
2025-10-17 01:52:13,473 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,473 INFO sqlalchemy.engine.Engine [cached since 0.05224s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJpRaITSRZwokRji4cRJdtswE', 'param_1': 1}
2025-10-17 01:52:13,475 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,476 INFO sqlalchemy.engine.Engine [cached since 0.05485s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJWTq1bSxfwokRLhRYPklpnGQ', 'param_1': 1}
2025-10-17 01:52:13,478 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id = %(place_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:13,478 INFO sqlalchemy.engine.Engine [cached since 0.05702s ago] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1': 'ChIJN5xZFJRZwokR7KPjEn6GHIo', 'param_1': 1}
2025-10-17 01:52:13,483 INFO sqlalchemy.engine.Engine INSERT INTO candidates (id, event_id, place_id, name, address, lat, lng, rating, user_ratings_total, distance_from_center, in_circle, opening_hours, added_by) VALUES (%(id__0)s, %(event_id__0)s, %(place_id__0)s, %(name__0)s, %(address__0)s, %(lat__0) ... 4551 characters truncated ... ircle__19)s, %(opening_hours__19)s, %(added_by__19)s) RETURNING candidates.created_at, candidates.id
2025-10-17 01:52:13,483 INFO sqlalchemy.engine.Engine [generated in 0.00025s (insertmanyvalues) 1/1 (ordered)] {'in_circle__0': False, 'lng__0': -73.94584569999999, 'event_id__0': 'evt_9c1144122ffb4d84', 'opening_hours__0': '{"open_now": true}', 'name__0': 'Court Square Diner', 'address__0': '45-30 23rd St, Long Island City', 'lat__0': 40.7460847, 'added_by__0': 'system', 'distance_from_center__0': 0.6578160882250587, 'place_id__0': 'ChIJN6wFwihZwokRMtxwzGii9PI', 'rating__0': 4.4, 'user_ratings_total__0': 3908, 'id__0': 'cand_evt_9c1144122ffb4d84_ChIJN6wFwihZ', 'in_circle__1': False, 'lng__1': -73.9328726, 'event_id__1': 'evt_9c1144122ffb4d84', 'opening_hours__1': None, 'name__1': 'Doha Bar Lounge - Brunch, Bar & Restaurant', 'address__1': '38-34 31st St, Long Island City', 'lat__1': 40.75303, 'added_by__1': 'system', 'distance_from_center__1': 0.7148772402490448, 'place_id__1': 'ChIJ64EKfyxfwokRj5CkS1LGFV8', 'rating__1': 4.2, 'user_ratings_total__1': 991, 'id__1': 'cand_evt_9c1144122ffb4d84_ChIJ64EKfyxf', 'in_circle__2': True, 'lng__2': -73.9399875, 'event_id__2': 'evt_9c1144122ffb4d84', 'opening_hours__2': '{"open_now": true}', 'name__2': 'El Gallo Negro 3 LIC', 'address__2': '41-34 Crescent St, Astoria', 'lat__2': 40.75148919999999, 'added_by__2': 'system', 'distance_from_center__2': 0.37526197457809174, 'place_id__2': 'ChIJNZMckVVZwokRG4KdwN8rSeY', 'rating__2': 4.2, 'user_ratings_total__2': 196, 'id__2': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'in_circle__3': False, 'lng__3': -73.9338897, 'event_id__3': 'evt_9c1144122ffb4d84', 'opening_hours__3': '{"open_now": false}', 'name__3': 'Beija Flor', 'address__3': '38-02 29th St, Long Island City', 'lat__3': 40.7545901, 'added_by__3': 'system', 'distance_from_center__3': 0.8056000147736678, 'place_id__3': 'ChIJA9zY7SxfwokR2Sh2eXYcRd8', 'rating__3': 4.4 ... 160 parameters truncated ... 'event_id__16': 'evt_9c1144122ffb4d84', 'opening_hours__16': '{"open_now": false}', 'name__16': 'Tacombi - Long Island City', 'address__16': '27-10 43rd Ave, Long Island City', 'lat__16': 40.747839, 'added_by__16': 'system', 'distance_from_center__16': 0.26898579275584233, 'place_id__16': 'ChIJp9WpPSxZwokR9e5KFVB9lWQ', 'rating__16': 4.2, 'user_ratings_total__16': 598, 'id__16': 'cand_evt_9c1144122ffb4d84_ChIJp9WpPSxZ', 'in_circle__17': True, 'lng__17': -73.9384513, 'event_id__17': 'evt_9c1144122ffb4d84', 'opening_hours__17': '{"open_now": false}', 'name__17': 'JACX&CO Food Hall', 'address__17': '28-17 Jackson Ave, Long Island City', 'lat__17': 40.7488559, 'added_by__17': 'system', 'distance_from_center__17': 0.06484061327328444, 'place_id__17': 'ChIJpRaITSRZwokRji4cRJdtswE', 'rating__17': 4.5, 'user_ratings_total__17': 989, 'id__17': 'cand_evt_9c1144122ffb4d84_ChIJpRaITSRZ', 'in_circle__18': False, 'lng__18': -73.9319064, 'event_id__18': 'evt_9c1144122ffb4d84', 'opening_hours__18': '{"open_now": false}', 'name__18': 'Suzuki Shokudo', 'address__18': '38-01 31st St, Long Island City', 'lat__18': 40.7535925, 'added_by__18': 'system', 'distance_from_center__18': 0.8161445724729017, 'place_id__18': 'ChIJWTq1bSxfwokRLhRYPklpnGQ', 'rating__18': 4.6, 'user_ratings_total__18': 598, 'id__18': 'cand_evt_9c1144122ffb4d84_ChIJWTq1bSxf', 'in_circle__19': False, 'lng__19': -73.94524419999999, 'event_id__19': 'evt_9c1144122ffb4d84', 'opening_hours__19': '{"open_now": false}', 'name__19': 'Joypot', 'address__19': '23-10 Jackson Ave, Long Island City', 'lat__19': 40.745827, 'added_by__19': 'system', 'distance_from_center__19': 0.6230826571984908, 'place_id__19': 'ChIJN5xZFJRZwokR7KPjEn6GHIo', 'rating__19': 4.7, 'user_ratings_total__19': 415, 'id__19': 'cand_evt_9c1144122ffb4d84_ChIJN5xZFJRZ'}
2025-10-17 01:52:13,492 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:52:13,496 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:13,497 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s AND candidates.place_id IN (%(place_id_1_1)s, %(place_id_1_2)s, %(place_id_1_3)s, %(place_id_1_4)s, %(place_id_1_5)s, %(place_id_1_6)s, %(place_id_1_7)s, %(place_id_1_8)s, %(place_id_1_9)s, %(place_id_1_10)s, %(place_id_1_11)s, %(place_id_1_12)s, %(place_id_1_13)s, %(place_id_1_14)s, %(place_id_1_15)s, %(place_id_1_16)s, %(place_id_1_17)s, %(place_id_1_18)s, %(place_id_1_19)s, %(place_id_1_20)s) AND candidates.in_circle = true
2025-10-17 01:52:13,498 INFO sqlalchemy.engine.Engine [generated in 0.00036s] {'event_id_1': 'evt_9c1144122ffb4d84', 'place_id_1_1': 'ChIJN6wFwihZwokRMtxwzGii9PI', 'place_id_1_2': 'ChIJ64EKfyxfwokRj5CkS1LGFV8', 'place_id_1_3': 'ChIJNZMckVVZwokRG4KdwN8rSeY', 'place_id_1_4': 'ChIJA9zY7SxfwokR2Sh2eXYcRd8', 'place_id_1_5': 'ChIJzdIV2eNZwokRxSJvbX8IIZ0', 'place_id_1_6': 'ChIJbT3uAHBZwokRFfBZhZmdQhk', 'place_id_1_7': 'ChIJAemDtCxfwokRrfHv58ZtcxA', 'place_id_1_8': 'ChIJfSp0FS1fwokR8PYGmnV6vYs', 'place_id_1_9': 'ChIJ4UMDmvtZwokR0twKqXNmzl4', 'place_id_1_10': 'ChIJ5dQtsxBZwokRbBdZUxaHzFE', 'place_id_1_11': 'ChIJb4GKl9VYwokRpSvqo0dCnls', 'place_id_1_12': 'ChIJzzk5JypZwokRQ0tuDC9Cwr8', 'place_id_1_13': 'ChIJ8UEYhUBZwokRoeoL3-iwtaE', 'place_id_1_14': 'ChIJicgjodRYwokRRe9iEqIfTvA', 'place_id_1_15': 'ChIJsaCQ-vNZwokRZXMSyrbzfio', 'place_id_1_16': 'ChIJlXecQSpZwokRrNscE92hBzQ', 'place_id_1_17': 'ChIJp9WpPSxZwokR9e5KFVB9lWQ', 'place_id_1_18': 'ChIJpRaITSRZwokRji4cRJdtswE', 'place_id_1_19': 'ChIJWTq1bSxfwokRLhRYPklpnGQ', 'place_id_1_20': 'ChIJN5xZFJRZwokR7KPjEn6GHIo'}
2025-10-17 01:52:13,503 INFO sqlalchemy.engine.Engine SELECT votes.candidate_id AS votes_candidate_id, count(votes.id) AS vote_count 
FROM votes 
WHERE votes.candidate_id IN (%(candidate_id_1_1)s, %(candidate_id_1_2)s, %(candidate_id_1_3)s, %(candidate_id_1_4)s, %(candidate_id_1_5)s, %(candidate_id_1_6)s, %(candidate_id_1_7)s, %(candidate_id_1_8)s, %(candidate_id_1_9)s, %(candidate_id_1_10)s, %(candidate_id_1_11)s) GROUP BY votes.candidate_id
2025-10-17 01:52:13,504 INFO sqlalchemy.engine.Engine [generated in 0.00041s] {'candidate_id_1_1': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'candidate_id_1_2': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ', 'candidate_id_1_3': 'cand_evt_9c1144122ffb4d84_ChIJbT3uAHBZ', 'candidate_id_1_4': 'cand_evt_9c1144122ffb4d84_ChIJ5dQtsxBZ', 'candidate_id_1_5': 'cand_evt_9c1144122ffb4d84_ChIJb4GKl9VY', 'candidate_id_1_6': 'cand_evt_9c1144122ffb4d84_ChIJzzk5JypZ', 'candidate_id_1_7': 'cand_evt_9c1144122ffb4d84_ChIJ8UEYhUBZ', 'candidate_id_1_8': 'cand_evt_9c1144122ffb4d84_ChIJsaCQ-vNZ', 'candidate_id_1_9': 'cand_evt_9c1144122ffb4d84_ChIJlXecQSpZ', 'candidate_id_1_10': 'cand_evt_9c1144122ffb4d84_ChIJp9WpPSxZ', 'candidate_id_1_11': 'cand_evt_9c1144122ffb4d84_ChIJpRaITSRZ'}
2025-10-17 01:52:13,507 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49926 - "POST /api/v1/events/evt_9c1144122ffb4d84/candidates/search HTTP/1.1" 200 OK
INFO:     127.0.0.1:49932 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/votes?participant_id=p_a866058f4b87 HTTP/1.1" 200 OK
2025-10-17 01:52:21,808 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:21,809 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:21,809 INFO sqlalchemy.engine.Engine [cached since 11.09s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,813 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.id = %(id_1)s AND participants.event_id = %(event_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:21,813 INFO sqlalchemy.engine.Engine [generated in 0.00023s] {'id_1': 'p_a866058f4b87', 'event_id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,816 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.id = %(id_1)s AND candidates.event_id = %(event_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:21,816 INFO sqlalchemy.engine.Engine [generated in 0.00019s] {'id_1': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'event_id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,820 INFO sqlalchemy.engine.Engine SELECT votes.id AS votes_id, votes.event_id AS votes_event_id, votes.participant_id AS votes_participant_id, votes.candidate_id AS votes_candidate_id, votes.voted_at AS votes_voted_at 
FROM votes 
WHERE votes.event_id = %(event_id_1)s AND votes.participant_id = %(participant_id_1)s AND votes.candidate_id = %(candidate_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:52:21,820 INFO sqlalchemy.engine.Engine [generated in 0.00026s] {'event_id_1': 'evt_9c1144122ffb4d84', 'participant_id_1': 'p_a866058f4b87', 'candidate_id_1': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'param_1': 1}
2025-10-17 01:52:21,823 INFO sqlalchemy.engine.Engine INSERT INTO votes (event_id, participant_id, candidate_id) VALUES (%(event_id)s, %(participant_id)s, %(candidate_id)s) RETURNING votes.id, votes.voted_at
2025-10-17 01:52:21,824 INFO sqlalchemy.engine.Engine [generated in 0.00018s] {'event_id': 'evt_9c1144122ffb4d84', 'participant_id': 'p_a866058f4b87', 'candidate_id': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ'}
2025-10-17 01:52:21,826 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:52:21,830 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:21,832 INFO sqlalchemy.engine.Engine SELECT votes.id, votes.event_id, votes.participant_id, votes.candidate_id, votes.voted_at 
FROM votes 
WHERE votes.id = %(pk_1)s
2025-10-17 01:52:21,832 INFO sqlalchemy.engine.Engine [generated in 0.00026s] {'pk_1': 6}
2025-10-17 01:52:21,840 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT votes.id AS votes_id, votes.event_id AS votes_event_id, votes.participant_id AS votes_participant_id, votes.candidate_id AS votes_candidate_id, votes.voted_at AS votes_voted_at 
FROM votes 
WHERE votes.event_id = %(event_id_1)s AND votes.candidate_id = %(candidate_id_1)s) AS anon_1
2025-10-17 01:52:21,840 INFO sqlalchemy.engine.Engine [generated in 0.00027s] {'event_id_1': 'evt_9c1144122ffb4d84', 'candidate_id_1': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ'}
2025-10-17 01:52:21,843 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49932 - "POST /api/v1/events/evt_9c1144122ffb4d84/votes?participant_id=p_a866058f4b87 HTTP/1.1" 201 Created
2025-10-17 01:52:21,851 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:21,852 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:21,852 INFO sqlalchemy.engine.Engine [cached since 11.13s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,855 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49932 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:52:21,862 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:21,862 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:21,862 INFO sqlalchemy.engine.Engine [cached since 11.14s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,864 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:52:21,864 INFO sqlalchemy.engine.Engine [cached since 11.12s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:52:21,866 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49932 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:52:21,888 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:52:21,888 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:52:21,888 INFO sqlalchemy.engine.Engine [cached since 11.17s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:52:21,891 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:52:21,891 INFO sqlalchemy.engine.Engine [cached since 11.14s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:52:21,895 INFO sqlalchemy.engine.Engine SELECT votes.candidate_id AS votes_candidate_id, count(votes.id) AS vote_count 
FROM votes 
WHERE votes.candidate_id IN (%(candidate_id_1_1)s, %(candidate_id_1_2)s, %(candidate_id_1_3)s, %(candidate_id_1_4)s, %(candidate_id_1_5)s, %(candidate_id_1_6)s, %(candidate_id_1_7)s, %(candidate_id_1_8)s, %(candidate_id_1_9)s, %(candidate_id_1_10)s, %(candidate_id_1_11)s, %(candidate_id_1_12)s, %(candidate_id_1_13)s, %(candidate_id_1_14)s, %(candidate_id_1_15)s, %(candidate_id_1_16)s, %(candidate_id_1_17)s, %(candidate_id_1_18)s, %(candidate_id_1_19)s, %(candidate_id_1_20)s) GROUP BY votes.candidate_id
2025-10-17 01:52:21,896 INFO sqlalchemy.engine.Engine [cached since 8.393s ago] {'candidate_id_1_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ', 'candidate_id_1_2': 'cand_evt_9c1144122ffb4d84_ChIJbT3uAHBZ', 'candidate_id_1_3': 'cand_evt_9c1144122ffb4d84_ChIJicgjodRY', 'candidate_id_1_4': 'cand_evt_9c1144122ffb4d84_ChIJN5xZFJRZ', 'candidate_id_1_5': 'cand_evt_9c1144122ffb4d84_ChIJWTq1bSxf', 'candidate_id_1_6': 'cand_evt_9c1144122ffb4d84_ChIJ4UMDmvtZ', 'candidate_id_1_7': 'cand_evt_9c1144122ffb4d84_ChIJ5dQtsxBZ', 'candidate_id_1_8': 'cand_evt_9c1144122ffb4d84_ChIJpRaITSRZ', 'candidate_id_1_9': 'cand_evt_9c1144122ffb4d84_ChIJfSp0FS1f', 'candidate_id_1_10': 'cand_evt_9c1144122ffb4d84_ChIJlXecQSpZ', 'candidate_id_1_11': 'cand_evt_9c1144122ffb4d84_ChIJN6wFwihZ', 'candidate_id_1_12': 'cand_evt_9c1144122ffb4d84_ChIJA9zY7Sxf', 'candidate_id_1_13': 'cand_evt_9c1144122ffb4d84_ChIJsaCQ-vNZ', 'candidate_id_1_14': 'cand_evt_9c1144122ffb4d84_ChIJ8UEYhUBZ', 'candidate_id_1_15': 'cand_evt_9c1144122ffb4d84_ChIJzzk5JypZ', 'candidate_id_1_16': 'cand_evt_9c1144122ffb4d84_ChIJp9WpPSxZ', 'candidate_id_1_17': 'cand_evt_9c1144122ffb4d84_ChIJ64EKfyxf', 'candidate_id_1_18': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'candidate_id_1_19': 'cand_evt_9c1144122ffb4d84_ChIJb4GKl9VY', 'candidate_id_1_20': 'cand_evt_9c1144122ffb4d84_ChIJAemDtCxf'}
2025-10-17 01:52:21,899 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49932 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
INFO:     127.0.0.1:49969 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/candidates/cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ/save HTTP/1.1" 200 OK
2025-10-17 01:53:15,457 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:15,458 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.id = %(id_1)s AND candidates.event_id = %(event_id_1)s 
 LIMIT %(param_1)s
2025-10-17 01:53:15,459 INFO sqlalchemy.engine.Engine [cached since 53.64s ago] {'id_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ', 'event_id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:15,466 INFO sqlalchemy.engine.Engine UPDATE candidates SET added_by=%(added_by)s WHERE candidates.id = %(candidates_id)s
2025-10-17 01:53:15,466 INFO sqlalchemy.engine.Engine [generated in 0.00036s] {'added_by': 'organizer', 'candidates_id': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ'}
2025-10-17 01:53:15,468 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:53:15,473 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:15,474 INFO sqlalchemy.engine.Engine SELECT candidates.id, candidates.event_id, candidates.place_id, candidates.name, candidates.address, candidates.lat, candidates.lng, candidates.rating, candidates.user_ratings_total, candidates.distance_from_center, candidates.in_circle, candidates.opening_hours, candidates.added_by, candidates.created_at 
FROM candidates 
WHERE candidates.id = %(pk_1)s
2025-10-17 01:53:15,475 INFO sqlalchemy.engine.Engine [generated in 0.00020s] {'pk_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ'}
2025-10-17 01:53:15,478 INFO sqlalchemy.engine.Engine SELECT count(votes.id) AS count_1 
FROM votes 
WHERE votes.candidate_id = %(candidate_id_1)s
2025-10-17 01:53:15,479 INFO sqlalchemy.engine.Engine [generated in 0.00024s] {'candidate_id_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ'}
2025-10-17 01:53:15,481 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49969 - "POST /api/v1/events/evt_9c1144122ffb4d84/candidates/cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ/save HTTP/1.1" 200 OK
2025-10-17 01:53:15,490 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:15,490 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:15,491 INFO sqlalchemy.engine.Engine [cached since 64.77s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:15,493 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49969 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:53:15,501 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:15,502 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:15,502 INFO sqlalchemy.engine.Engine [cached since 64.78s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:15,504 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:53:15,505 INFO sqlalchemy.engine.Engine [cached since 64.76s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:15,506 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49969 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:53:15,543 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:15,543 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:15,543 INFO sqlalchemy.engine.Engine [cached since 64.82s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:15,544 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:53:15,545 INFO sqlalchemy.engine.Engine [cached since 64.79s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:15,550 INFO sqlalchemy.engine.Engine SELECT votes.candidate_id AS votes_candidate_id, count(votes.id) AS vote_count 
FROM votes 
WHERE votes.candidate_id IN (%(candidate_id_1_1)s, %(candidate_id_1_2)s, %(candidate_id_1_3)s, %(candidate_id_1_4)s, %(candidate_id_1_5)s, %(candidate_id_1_6)s, %(candidate_id_1_7)s, %(candidate_id_1_8)s, %(candidate_id_1_9)s, %(candidate_id_1_10)s, %(candidate_id_1_11)s, %(candidate_id_1_12)s, %(candidate_id_1_13)s, %(candidate_id_1_14)s, %(candidate_id_1_15)s, %(candidate_id_1_16)s, %(candidate_id_1_17)s, %(candidate_id_1_18)s, %(candidate_id_1_19)s, %(candidate_id_1_20)s) GROUP BY votes.candidate_id
2025-10-17 01:53:15,550 INFO sqlalchemy.engine.Engine [cached since 62.05s ago] {'candidate_id_1_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ', 'candidate_id_1_2': 'cand_evt_9c1144122ffb4d84_ChIJbT3uAHBZ', 'candidate_id_1_3': 'cand_evt_9c1144122ffb4d84_ChIJicgjodRY', 'candidate_id_1_4': 'cand_evt_9c1144122ffb4d84_ChIJN5xZFJRZ', 'candidate_id_1_5': 'cand_evt_9c1144122ffb4d84_ChIJWTq1bSxf', 'candidate_id_1_6': 'cand_evt_9c1144122ffb4d84_ChIJ4UMDmvtZ', 'candidate_id_1_7': 'cand_evt_9c1144122ffb4d84_ChIJ5dQtsxBZ', 'candidate_id_1_8': 'cand_evt_9c1144122ffb4d84_ChIJpRaITSRZ', 'candidate_id_1_9': 'cand_evt_9c1144122ffb4d84_ChIJfSp0FS1f', 'candidate_id_1_10': 'cand_evt_9c1144122ffb4d84_ChIJlXecQSpZ', 'candidate_id_1_11': 'cand_evt_9c1144122ffb4d84_ChIJN6wFwihZ', 'candidate_id_1_12': 'cand_evt_9c1144122ffb4d84_ChIJA9zY7Sxf', 'candidate_id_1_13': 'cand_evt_9c1144122ffb4d84_ChIJsaCQ-vNZ', 'candidate_id_1_14': 'cand_evt_9c1144122ffb4d84_ChIJ8UEYhUBZ', 'candidate_id_1_15': 'cand_evt_9c1144122ffb4d84_ChIJzzk5JypZ', 'candidate_id_1_16': 'cand_evt_9c1144122ffb4d84_ChIJp9WpPSxZ', 'candidate_id_1_17': 'cand_evt_9c1144122ffb4d84_ChIJ64EKfyxf', 'candidate_id_1_18': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'candidate_id_1_19': 'cand_evt_9c1144122ffb4d84_ChIJb4GKl9VY', 'candidate_id_1_20': 'cand_evt_9c1144122ffb4d84_ChIJAemDtCxf'}
2025-10-17 01:53:15,552 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49969 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
INFO:     127.0.0.1:49971 - "OPTIONS /api/v1/events/evt_9c1144122ffb4d84/publish HTTP/1.1" 200 OK
2025-10-17 01:53:26,555 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:26,556 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:26,556 INFO sqlalchemy.engine.Engine [cached since 75.84s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:26,561 INFO sqlalchemy.engine.Engine UPDATE events SET allow_vote=%(allow_vote)s, final_decision=%(final_decision)s WHERE events.id = %(events_id)s
2025-10-17 01:53:26,561 INFO sqlalchemy.engine.Engine [generated in 0.00037s] {'allow_vote': False, 'final_decision': 'Cyan Izakaya', 'events_id': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:26,563 INFO sqlalchemy.engine.Engine COMMIT
2025-10-17 01:53:26,567 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:26,569 INFO sqlalchemy.engine.Engine SELECT events.id, events.title, events.category, events.deadline, events.visibility, events.allow_vote, events.final_decision, events.custom_center_lat, events.custom_center_lng, events.created_at, events.expires_at, events.deleted_at, events.created_by 
FROM events 
WHERE events.id = %(pk_1)s
2025-10-17 01:53:26,569 INFO sqlalchemy.engine.Engine [generated in 0.00033s] {'pk_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:26,574 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49971 - "POST /api/v1/events/evt_9c1144122ffb4d84/publish HTTP/1.1" 200 OK
2025-10-17 01:53:26,583 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:26,584 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:26,584 INFO sqlalchemy.engine.Engine [cached since 75.86s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:26,589 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49971 - "GET /api/v1/events/evt_9c1144122ffb4d84 HTTP/1.1" 200 OK
2025-10-17 01:53:26,594 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:26,594 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:26,594 INFO sqlalchemy.engine.Engine [cached since 75.87s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:26,596 INFO sqlalchemy.engine.Engine SELECT participants.id AS participants_id, participants.event_id AS participants_event_id, participants.lat AS participants_lat, participants.lng AS participants_lng, participants.fuzzy_lat AS participants_fuzzy_lat, participants.fuzzy_lng AS participants_fuzzy_lng, participants.name AS participants_name, participants.joined_at AS participants_joined_at 
FROM participants 
WHERE participants.event_id = %(event_id_1)s
2025-10-17 01:53:26,596 INFO sqlalchemy.engine.Engine [cached since 75.85s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:26,597 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49971 - "GET /api/v1/events/evt_9c1144122ffb4d84/participants HTTP/1.1" 200 OK
2025-10-17 01:53:26,615 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-17 01:53:26,616 INFO sqlalchemy.engine.Engine SELECT events.id AS events_id, events.title AS events_title, events.category AS events_category, events.deadline AS events_deadline, events.visibility AS events_visibility, events.allow_vote AS events_allow_vote, events.final_decision AS events_final_decision, events.custom_center_lat AS events_custom_center_lat, events.custom_center_lng AS events_custom_center_lng, events.created_at AS events_created_at, events.expires_at AS events_expires_at, events.deleted_at AS events_deleted_at, events.created_by AS events_created_by 
FROM events 
WHERE events.id = %(id_1)s AND events.deleted_at IS NULL 
 LIMIT %(param_1)s
2025-10-17 01:53:26,616 INFO sqlalchemy.engine.Engine [cached since 75.9s ago] {'id_1': 'evt_9c1144122ffb4d84', 'param_1': 1}
2025-10-17 01:53:26,619 INFO sqlalchemy.engine.Engine SELECT candidates.id AS candidates_id, candidates.event_id AS candidates_event_id, candidates.place_id AS candidates_place_id, candidates.name AS candidates_name, candidates.address AS candidates_address, candidates.lat AS candidates_lat, candidates.lng AS candidates_lng, candidates.rating AS candidates_rating, candidates.user_ratings_total AS candidates_user_ratings_total, candidates.distance_from_center AS candidates_distance_from_center, candidates.in_circle AS candidates_in_circle, candidates.opening_hours AS candidates_opening_hours, candidates.added_by AS candidates_added_by, candidates.created_at AS candidates_created_at 
FROM candidates 
WHERE candidates.event_id = %(event_id_1)s ORDER BY candidates.rating DESC
2025-10-17 01:53:26,619 INFO sqlalchemy.engine.Engine [cached since 75.87s ago] {'event_id_1': 'evt_9c1144122ffb4d84'}
2025-10-17 01:53:26,623 INFO sqlalchemy.engine.Engine SELECT votes.candidate_id AS votes_candidate_id, count(votes.id) AS vote_count 
FROM votes 
WHERE votes.candidate_id IN (%(candidate_id_1_1)s, %(candidate_id_1_2)s, %(candidate_id_1_3)s, %(candidate_id_1_4)s, %(candidate_id_1_5)s, %(candidate_id_1_6)s, %(candidate_id_1_7)s, %(candidate_id_1_8)s, %(candidate_id_1_9)s, %(candidate_id_1_10)s, %(candidate_id_1_11)s, %(candidate_id_1_12)s, %(candidate_id_1_13)s, %(candidate_id_1_14)s, %(candidate_id_1_15)s, %(candidate_id_1_16)s, %(candidate_id_1_17)s, %(candidate_id_1_18)s, %(candidate_id_1_19)s, %(candidate_id_1_20)s) GROUP BY votes.candidate_id
2025-10-17 01:53:26,624 INFO sqlalchemy.engine.Engine [cached since 73.12s ago] {'candidate_id_1_1': 'cand_evt_9c1144122ffb4d84_ChIJzdIV2eNZ', 'candidate_id_1_2': 'cand_evt_9c1144122ffb4d84_ChIJbT3uAHBZ', 'candidate_id_1_3': 'cand_evt_9c1144122ffb4d84_ChIJicgjodRY', 'candidate_id_1_4': 'cand_evt_9c1144122ffb4d84_ChIJN5xZFJRZ', 'candidate_id_1_5': 'cand_evt_9c1144122ffb4d84_ChIJWTq1bSxf', 'candidate_id_1_6': 'cand_evt_9c1144122ffb4d84_ChIJ4UMDmvtZ', 'candidate_id_1_7': 'cand_evt_9c1144122ffb4d84_ChIJ5dQtsxBZ', 'candidate_id_1_8': 'cand_evt_9c1144122ffb4d84_ChIJpRaITSRZ', 'candidate_id_1_9': 'cand_evt_9c1144122ffb4d84_ChIJfSp0FS1f', 'candidate_id_1_10': 'cand_evt_9c1144122ffb4d84_ChIJlXecQSpZ', 'candidate_id_1_11': 'cand_evt_9c1144122ffb4d84_ChIJN6wFwihZ', 'candidate_id_1_12': 'cand_evt_9c1144122ffb4d84_ChIJA9zY7Sxf', 'candidate_id_1_13': 'cand_evt_9c1144122ffb4d84_ChIJsaCQ-vNZ', 'candidate_id_1_14': 'cand_evt_9c1144122ffb4d84_ChIJ8UEYhUBZ', 'candidate_id_1_15': 'cand_evt_9c1144122ffb4d84_ChIJzzk5JypZ', 'candidate_id_1_16': 'cand_evt_9c1144122ffb4d84_ChIJp9WpPSxZ', 'candidate_id_1_17': 'cand_evt_9c1144122ffb4d84_ChIJ64EKfyxf', 'candidate_id_1_18': 'cand_evt_9c1144122ffb4d84_ChIJNZMckVVZ', 'candidate_id_1_19': 'cand_evt_9c1144122ffb4d84_ChIJb4GKl9VY', 'candidate_id_1_20': 'cand_evt_9c1144122ffb4d84_ChIJAemDtCxf'}
2025-10-17 01:53:26,627 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:49971 - "GET /api/v1/events/evt_9c1144122ffb4d84/candidates HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/db/base.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for connections to close. (CTRL+C to force quit)
